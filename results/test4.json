{"1": {"title": "Financial intermediation and risk in decentralized lending protocols", "summary": "We provide an overview of decentralized protocols like Compound and Aave that\noffer collateralized loans for cryptoasset investors. Compound and Aave are two\nof the most important application in the decentralized finance (DeFi)\necosystem. Using publicly available information on rates, supply and borrow\nactivity, and accounts we analyze different elements of the protocols. In\nparticular, we estimate ex-post margins that give a comprehensive account of\nthe cost of financial intermediation. We find that ex-post margins considering\nall markets are 1% and lower for stablecoin markets. In addition, we estimate\nquarterly indicators regarding solvency, asset quality, earnings and market\nrisk similar to the ones used in traditional banking. This provides a first\nlook at the use of these metrics and a comparison between the similarities and\nchallenges to our understanding of financial intermediation in these protocols\nbased on tools used for traditional banking.", "pdf url": "http://arxiv.org/pdf/2107.14678v1", "date": "2021-07-30 14:54:40+00:00"}, "2": {"title": "Zero-knowledge Based Proof-chain -- A methodology for blockchain-partial system", "summary": "Intuitively there is a drastic distinction between the pure decentralized\nblock-chain systems like Defis and those that only utilize block-chain as an\nenhancing technology but remain centralized with real-world business model and\nconventional technologies like database, application server, etc. Our study\nexplores extensively this distinction from a methodological point of view,\nclassifies them into blockchain-complete and blockchain-partial, analyzes key\nfeatures of the two types, and reveals the root cause of this distinction. We\nanalyze the function or, in more strong words, the \"ultimate purpose\" of\nblockchain in the blockchain-partial systems, and present a conceptual model we\nnamed proof-chain that quite satisfactorily represented the general paradigm of\nblockchain in blockchain-partial systems. A universal tension between strength\nof proof-chain and privacy is then revealed and the zero-knowledge based\nproof-chain takes shape. Several case studies demonstrate the explaining power\nof our proof-chain methodology. We then apply proof-chain methodology to the\nanalysis of the ecosystem of a collaborating group of blockchain-partial\nsystems, representing the paradigm of public and private data domain whose\nborder the proof-chain crosses. Finally, some derived guidelines from this\nmethodology speak usefulness of our methodology.", "pdf url": "http://arxiv.org/pdf/2107.14142v1", "date": "2021-06-29 21:59:21+00:00"}, "3": {"title": "Training Massive Deep Neural Networks in a Smart Contract: A New Hope", "summary": "Deep neural networks (DNNs) could be very useful in blockchain applications\nsuch as DeFi and NFT trading. However, training / running large-scale DNNs as\npart of a smart contract is infeasible on today's blockchain platforms, due to\ntwo fundamental design issues of these platforms. First, blockchains nowadays\ntypically require that each node maintain the complete world state at any time,\nmeaning that the node must execute all transactions in every block. This is\nprohibitively expensive for computationally intensive smart contracts involving\nDNNs. Second, existing blockchain platforms expect smart contract transactions\nto have deterministic, reproducible results and effects. In contrast, DNNs are\nusually trained / run lock-free on massively parallel computing devices such as\nGPUs, TPUs and / or computing clusters, which often do not yield deterministic\nresults.\n  This paper proposes novel platform designs, collectively called A New Hope\n(ANH), that address the above issues. The main ideas are (i)\ncomputing-intensive smart contract transactions are only executed by nodes who\nneed their results, or by specialized serviced providers, and (ii) a\nnon-deterministic smart contract transaction leads to uncertain results, which\ncan still be validated, though at a relatively high cost; specifically for\nDNNs, the validation cost can often be reduced by verifying properties of the\nresults instead of their exact values. In addition, we discuss various\nimplications of ANH, including its effects on token fungibility, sharding,\nprivate transactions, and the fundamental meaning of a smart contract.", "pdf url": "http://arxiv.org/pdf/2106.14763v1", "date": "2021-06-28 14:38:44+00:00"}, "4": {"title": "Flash Crash for Cash: Cyber Threats in Decentralized Finance", "summary": "Decentralized Finance (DeFi) took shape in 2020. An unprecedented amount of\nover 14 billion USD moved into DeFi projects offering trading, loans and\ninsurance. But its growth has also drawn the attention of malicious actors.\nMany projects were exploited as quickly as they launched and millions of USD\nwere lost. While many developers understand integer overflows and reentrancy\nattacks, security threats to the DeFi ecosystem are more complex and still\npoorly understood. In this paper we provide the first overview of in-the-wild\nDeFi security incidents. We observe that many of these exploits are market\nattacks, weaponizing weakly implemented business logic in one protocol with\ncredit provided by another to inflate appropriations. Rather than misusing\nindividual protocols, attackers increasingly use DeFi's strength of\npermissionless composability against itself. By providing the first holistic\nanalysis of real-world security incidents within the nascent financial\necosystem DeFi is, we hope to inform threat modeling in decentralized\ncryptoeconomic initiatives in the years ahead.", "pdf url": "http://arxiv.org/pdf/2106.10740v1", "date": "2021-06-20 19:02:01+00:00"}, "5": {"title": "CeFi vs. DeFi -- Comparing Centralized to Decentralized Finance", "summary": "To non-experts, the traditional Centralized Finance (CeFi) ecosystem may seem\nobscure, because users are typically not aware of the underlying rules or\nagreements of financial assets and products. Decentralized Finance (DeFi),\nhowever, is making its debut as an ecosystem claiming to offer transparency and\ncontrol, which are partially attributable to the underlying integrity-protected\nblockchain, as well as currently higher financial asset yields than CeFi. Yet,\nthe boundaries between CeFi and DeFi may not be always so clear cut.\n  In this work, we systematically analyze the differences between CeFi and\nDeFi, covering legal, economic, security, privacy and market manipulation. We\nprovide a structured methodology to differentiate between a CeFi and a DeFi\nservice. Our findings show that certain DeFi assets (such as USDC or USDT\nstablecoins) do not necessarily classify as DeFi assets, and may endanger the\neconomic security of intertwined DeFi protocols. We conclude this work with the\nexploration of possible synergies between CeFi and DeFi.", "pdf url": "http://arxiv.org/pdf/2106.08157v2", "date": "2021-06-15 13:53:43+00:00"}, "6": {"title": "An Empirical Study of DeFi Liquidations: Incentives, Risks, and Instabilities", "summary": "Financial speculators often seek to increase their potential gains with\nleverage. Debt is a popular form of leverage, and with over 39.88B USD of total\nvalue locked (TVL), the Decentralized Finance (DeFi) lending markets are\nthriving. Debts, however, entail the risks of liquidation, the process of\nselling the debt collateral at a discount to liquidators. Nevertheless, few\nquantitative insights are known about the existing liquidation mechanisms.\n  In this paper, to the best of our knowledge, we are the first to study the\nbreadth of the borrowing and lending markets of the Ethereum DeFi ecosystem. We\nfocus on Aave, Compound, MakerDAO, and dYdX, which collectively represent over\n85% of the lending market on Ethereum. Given extensive liquidation data\nmeasurements and insights, we systematize the prevalent liquidation mechanisms\nand are the first to provide a methodology to compare them objectively. We find\nthat the existing liquidation designs well incentivize liquidators but sell\nexcessive amounts of discounted collateral at the borrowers' expenses. We\nmeasure various risks that liquidation participants are exposed to and quantify\nthe instabilities of existing lending protocols. Moreover, we propose an\noptimal strategy that allows liquidators to increase their liquidation profit,\nwhich may aggravate the loss of borrowers.", "pdf url": "http://arxiv.org/pdf/2106.06389v1", "date": "2021-06-11 13:49:33+00:00"}, "7": {"title": "Maximizing Extractable Value from Automated Market Makers", "summary": "Automated Market Makers (AMMs) are decentralized applications that allow\nusers to exchange crypto-tokens without the need to find a matching exchange\norder. AMMs are one of the most successful DeFi use case so far, as the main\nAMM platforms UniSwap and Balancer process a daily volume of transactions worth\nbillions of dollars. Despite this success story, AMMs are well-known to suffer\nfrom transaction-ordering issues: indeed, adversaries can frontrun user\ntransactions to increase their gain to the detriment of honest users. Being\nspecifically designated to arrange user transactions into blocks, miners can\neasily play the role of adversary, by suitably selecting and ordering\ntransactions - and possibly inserting their own - to increase their gain. In\nthis paper we formally characterize rational miners as players which follow an\noptimal strategy in the mining game. We identify relevant variants of the game,\ncorresponding to specific real-world constraints that a miner might have. We\ndevise effective procedures to construct solutions to mining game, both in its\nmost general form and in some relevant variants. Most notably, miners can\nexploit these solutions to maximize the value extracted from user transactions.", "pdf url": "http://arxiv.org/pdf/2106.01870v1", "date": "2021-06-02 10:32:05+00:00"}, "8": {"title": "DeFiRanger: Detecting Price Manipulation Attacks on DeFi Applications", "summary": "The rapid growth of Decentralized Finance (DeFi) boosts the Ethereum\necosystem. At the same time, attacks towards DeFi applications (apps) are\nincreasing. However, to the best of our knowledge, existing smart contract\nvulnerability detection tools cannot be directly used to detect DeFi attacks.\nThat's because they lack the capability to recover and understand high-level\nDeFi semantics, e.g., a user trades a token pair X and Y in a Decentralized\nEXchange (DEX).\n  In this work, we focus on the detection of two types of new attacks on DeFi\napps, including direct and indirect price manipulation attacks. The former one\nmeans that an attacker directly manipulates the token price in DEX by\nperforming an unwanted trade in the same DEX by attacking the vulnerable DeFi\napp. The latter one means that an attacker indirectly manipulates the token\nprice of the vulnerable DeFi app (e.g., a lending app). To this end, we propose\na platform-independent way to recover high-level DeFi semantics by first\nconstructing the cash flow tree from raw Ethereum transactions and then lifting\nthe low-level semantics to high-level ones, including token trade, liquidity\nmining, and liquidity cancel. Finally, we detect price manipulation attacks\nusing the patterns expressed with the recovered DeFi semantics.\n  We have implemented a prototype named \\tool{} and applied it to more than 350\nmillion transactions. It successfully detected 432 real-world attacks in the\nwild. We confirm that they belong to four known security incidents and five\nzero-day ones. We reported our findings. Two CVEs have been assigned. We\nfurther performed an attack analysis to reveal the root cause of the\nvulnerability, the attack footprint, and the impact of the attack. Our work\nurges the need to secure the DeFi ecosystem.", "pdf url": "http://arxiv.org/pdf/2104.15068v1", "date": "2021-04-30 15:38:16+00:00"}, "9": {"title": "From banks to DeFi: the evolution of the lending market", "summary": "The Internet of Value (IOV) with its distributed ledger technology (DLT)\nunderpinning has created new forms of lending markets. As an integral part of\nthe decentralised finance (DeFi) ecosystem, lending protocols are gaining\ntremendous traction, holding an aggregate liquidity supply of over $40 billion\nat the time of writing. In this paper, we enumerate the challenges of\ntraditional money markets led by banks and lending platforms, and present\nadvantageous characteristics of DeFi lending protocols that might help resolve\ndeep-rooted issues in the conventional lending environment. With the examples\nof Maker, Compound and Aave, we describe in detail the mechanism of DeFi\nlending protocols. We discuss the persisting reliance of DeFi lending on the\ntraditional financial system, and conclude with the outlook of the lending\nmarket in the IOV era.", "pdf url": "http://arxiv.org/pdf/2104.00970v2", "date": "2021-04-02 10:21:41+00:00"}, "10": {"title": "SoK: Decentralized Exchanges (DEX) with Automated Market Maker (AMM) protocols", "summary": "As an integral part of the Decentralized Finance (DeFi) ecosystem, Automated\nMarket Maker (AMM) based Decentralized Exchanges (DEXs) have gained massive\ntraction with the revived interest in blockchain and distributed ledger\ntechnology in general. Most prominently, the top six AMMs -- Uniswap, Balancer,\nCurve, DODO, Bancor and Sushiswap -- hold in aggregate 15 billion USD worth of\ncrypto-assets as of March 2021. Instead of matching the buy and sell sides,\nAMMs employ a peer-to-pool method and determine asset price algorithmically\nthrough a so-called conservation function. Compared to centralized exchanges,\nAMMs exhibit the apparent advantage of decentralization, automation and\ncontinuous liquidity. Nonetheless, AMMs typically feature drawbacks such as\nhigh slippage for traders and divergence loss for liquidity providers. This\nwork establishes a general AMM framework describing the economics and\nformalizing the system's state-space representation. We employ our framework to\nsystematically compare the top AMM protocols' mechanics, deriving their\nslippage and divergence loss functions. We further discuss security and privacy\nconcerns associated with AMM DEXs, and conduct a comprehensive literature\nreview on related work covering both DeFi and conventional market\nmicrostructure.", "pdf url": "http://arxiv.org/pdf/2103.12732v3", "date": "2021-03-23 17:57:40+00:00"}, "11": {"title": "BLOCKEYE: Hunting For DeFi Attacks on Blockchain", "summary": "Decentralized finance, i.e., DeFi, has become the most popular type of\napplication on many public blockchains (e.g., Ethereum) in recent years.\nCompared to the traditional finance, DeFi allows customers to flexibly\nparticipate in diverse blockchain financial services (e.g., lending, borrowing,\ncollateralizing, exchanging etc.) via smart contracts at a relatively low cost\nof trust. However, the open nature of DeFi inevitably introduces a large attack\nsurface, which is a severe threat to the security of participants funds. In\nthis paper, we proposed BLOCKEYE, a real-time attack detection system for DeFi\nprojects on the Ethereum blockchain. Key capabilities provided by BLOCKEYE are\ntwofold: (1) Potentially vulnerable DeFi projects are identified based on an\nautomatic security analysis process, which performs symbolic reasoning on the\ndata flow of important service states, e.g., asset price, and checks whether\nthey can be externally manipulated. (2) Then, a transaction monitor is\ninstalled offchain for a vulnerable DeFi project. Transactions sent not only to\nthat project but other associated projects as well are collected for further\nsecurity analysis. A potential attack is flagged if a violation is detected on\na critical invariant configured in BLOCKEYE, e.g., Benefit is achieved within a\nvery short time and way much bigger than the cost. We applied BLOCKEYE in\nseveral popular DeFi projects and managed to discover potential security\nattacks that are unreported before. A video of BLOCKEYE is available at\nhttps://youtu.be/7DjsWBLdlQU.", "pdf url": "http://arxiv.org/pdf/2103.02873v1", "date": "2021-03-04 07:41:12+00:00"}, "12": {"title": "On the Just-In-Time Discovery of Profit-Generating Transactions in DeFi Protocols", "summary": "In this paper, we investigate two methods that allow us to automatically\ncreate profitable DeFi trades, one well-suited to arbitrage and the other\napplicable to more complicated settings. We first adopt the Bellman-Ford-Moore\nalgorithm with DEFIPOSER-ARB and then create logical DeFi protocol models for a\ntheorem prover in DEFIPOSER-SMT. While DEFIPOSER-ARB focuses on DeFi\ntransactions that form a cycle and performs very well for arbitrage,\nDEFIPOSER-SMT can detect more complicated profitable transactions. We estimate\nthat DEFIPOSER-ARB and DEFIPOSER-SMT can generate an average weekly revenue of\n191.48ETH (76,592USD) and 72.44ETH (28,976USD) respectively, with the highest\ntransaction revenue being 81.31ETH(32,524USD) and22.40ETH (8,960USD)\nrespectively. We further show that DEFIPOSER-SMT finds the known economic bZx\nattack from February 2020, which yields 0.48M USD. Our forensic investigations\nshow that this opportunity existed for 69 days and could have yielded more\nrevenue if exploited one day earlier. Our evaluation spans 150 days, given 96\nDeFi protocol actions, and 25 assets.\n  Looking beyond the financial gains mentioned above, forks deteriorate the\nblockchain consensus security, as they increase the risks of double-spending\nand selfish mining. We explore the implications of DEFIPOSER-ARB and\nDEFIPOSER-SMT on blockchain consensus. Specifically, we show that the trades\nidentified by our tools exceed the Ethereum block reward by up to 874x. Given\noptimal adversarial strategies provided by a Markov Decision Process (MDP), we\nquantify the value threshold at which a profitable transaction qualifies as\nMiner ExtractableValue (MEV) and would incentivize MEV-aware miners to fork the\nblockchain. For instance, we find that on Ethereum, a miner with a hash rate of\n10% would fork the blockchain if an MEV opportunity exceeds 4x the block\nreward.", "pdf url": "http://arxiv.org/pdf/2103.02228v1", "date": "2021-03-03 07:42:35+00:00"}, "13": {"title": "Formal Analysis of Composable DeFi Protocols", "summary": "Decentralized finance (DeFi) has become one of the most successful\napplications of blockchain and smart contracts. The DeFi ecosystem enables a\nwide range of crypto-financial activities, while the underlying smart contracts\noften contain bugs, with many vulnerabilities arising from the unforeseen\nconsequences of composing DeFi protocols together. In this paper, we propose a\nformal process-algebraic technique that models DeFi protocols in a\ncompositional manner to allow for efficient property verification. We also\nconduct a case study to demonstrate the proposed approach in analyzing the\ncomposition of two interacting DeFi protocols, namely, Curve and Compound.\nFinally, we discuss how the proposed modeling and verification approach can be\nused to analyze financial and security properties of interest.", "pdf url": "http://arxiv.org/pdf/2103.00540v2", "date": "2021-02-28 15:47:20+00:00"}, "14": {"title": "How Decentralized is the Governance of Blockchain-based Finance: Empirical Evidence from four Governance Token Distributions", "summary": "Novel blockchain technology provides the infrastructure layer for the\ncreation of decentralized appli-cations. A rapidly growing ecosystem of\napplications is built around financial services, commonly referred to as\ndecentralized finance. Whereas the intangible concept of decentralization is\npresented as a key driver for the applications, defining and measuring\ndecentralization is multifaceted. This pa-per provides a framework to quantify\ndecentralization of governance power among blockchain appli-cations. Governance\nof the applications is increasingly important and requires striking a balance\nbe-tween broad distribution, fostering user activity, and financial incentives.\nTherefore, we aggregate, parse, and analyze empirical data of four finance\napplications calculating coefficients for the statistical dispersion of the\ngovernance token distribution. The gauges potentially support IS scholars for\nan objective evaluation of the capabilities and limitations of token governance\nand for fast iteration in design-driven governance mechanisms.", "pdf url": "http://arxiv.org/pdf/2102.10096v2", "date": "2021-02-02 09:52:26+00:00"}, "15": {"title": "Flashot: A Snapshot of Flash Loan Attack on DeFi Ecosystem", "summary": "Flash Loan attack can grab millions of dollars from decentralized vaults in\none single transaction, drawing increasing attention from the Decentralized\nFinance (DeFi) players. It has also demonstrated an exciting opportunity that a\nhuge wealth could be created by composing DeFi's building blocks and exploring\nthe arbitrage change. However, a fundamental framework to study the field of\nDeFi has not yet reached a consensus and there's a lack of standard tools or\nlanguages to help better describe, design and improve the running processes of\nthe infant DeFi systems, which naturally makes it harder to understand the\nbasic principles behind the complexity of Flash Loan attacks.\n  In this paper, we are the first to propose Flashot, a prototype that is able\nto transparently illustrate the precise asset flows intertwined with smart\ncontracts in a standardized diagram for each Flash Loan event. Some use cases\nare shown and specifically, based on Flashot, we study a typical Pump and\nArbitrage case and present in-depth economic explanations to the attacker's\nbehaviors. Finally, we conclude the development trends of Flash Loan attacks\nand discuss the great impact on DeFi ecosystem brought by Flash Loan. We\nenvision a brand new quantitative financial industry powered by highly\nefficient automatic risk and profit detection systems based on the blockchain.", "pdf url": "http://arxiv.org/pdf/2102.00626v1", "date": "2021-02-01 04:20:56+00:00"}, "16": {"title": "SoK: Decentralized Finance (DeFi)", "summary": "Decentralized Finance (DeFi), a blockchain powered peer-to-peer financial\nsystem, is mushrooming. One year ago the total value locked in DeFi systems was\napproximately 700m USD, now, as of April 2021, it stands at around 51bn USD.\nThe frenetic evolution of the ecosystem makes it challenging for newcomers to\ngain an understanding of its basic features. In this Systematization of\nKnowledge (SoK), we delineate the DeFi ecosystem along its principal axes.\nFirst, we provide an overview of the DeFi primitives. Second, we classify DeFi\nprotocols according to the type of operation they provide. We then go on to\nconsider in detail the technical and economic security of DeFi protocols,\ndrawing particular attention to the issues that emerge specifically in the DeFi\nsetting. Finally, we outline the open research challenges in the ecosystem.", "pdf url": "http://arxiv.org/pdf/2101.08778v3", "date": "2021-01-21 18:58:43+00:00"}, "17": {"title": "DeFi-ning DeFi: Challenges & Pathway", "summary": "The decentralized and trustless nature of cryptocurrencies and blockchain\ntechnology leads to a shift in the digital world. The possibility to execute\nsmall programs, called smart contracts, on cryptocurrencies like Ethereum\nopened doors to countless new applications. One particular exciting use case is\ndecentralized finance (DeFi), which aims to revolutionize traditional financial\nservices by founding them on a decentralized infrastructure. We show the\npotential of DeFi by analyzing its advantages compared to traditional finance.\nAdditionally, we survey the state-of-the-art of DeFi products and categorize\nexisting services. Since DeFi is still in its infancy, there are countless\nhurdles for mass adoption. We discuss the most prominent challenges and point\nout possible solutions. Finally, we analyze the economics behind DeFi products.\nBy carefully analyzing the state-of-the-art and discussing current challenges,\nwe give a perspective on how the DeFi space might develop in the near future.", "pdf url": "http://arxiv.org/pdf/2101.05589v1", "date": "2021-01-14 13:46:01+00:00"}, "18": {"title": "Quantifying Blockchain Extractable Value: How dark is the forest?", "summary": "Permissionless blockchains such as Bitcoin have excelled at financial\nservices. Yet, adversaries extract monetary value from the mesh of\ndecentralized finance (DeFi) smart contracts. Some have characterized the\nEthereum peer-to-peer network as a dark forest, wherein broadcast transactions\nrepresent prey, which are devoured by generalized trading bots.\n  While transaction (re)ordering and front-running are known to cause losses to\nusers, we quantify how much value was sourced from blockchain extractable value\n(BEV). We systematize a transaction ordering taxonomy to quantify the USD\nextracted from sandwich attacks, liquidations, and decentralized exchange\narbitrage. We estimate that over 2 years, those trading activities yielded\n28.80M USD in profit, divided among 5,084 unique addresses. While arbitrage and\nliquidations might appear benign, traders can front-run others, causing\nfinancial losses to competitors.\n  To provide an example of a generalized trading bot, we show a simple yet\neffective automated transaction replay algorithm capable of replacing\nunconfirmed transactions without the need to understand the victim\ntransactions' underlying logic. We estimate that our transaction replay\nalgorithm could have yielded a profit of 51,688.33 ETH (17.60M USD) over 2\nyears on past blockchain data.\n  We also find that miners do not broadcast 1.64% of their mined transactions\nand instead choose to mine them privately. Privately mined and non-shared\ntransactions, cannot be front-run by other traders or miners. We show that the\nlargest Ethereum mining pool performs arbitrage and seemingly tries to cloak\nits private transaction mining activities. We therefore provide evidence that\nminers already extract Miner Extractable Value (MEV), which could destabilize\nthe blockchain consensus security, as related work has shown.", "pdf url": "http://arxiv.org/pdf/2101.05511v3", "date": "2021-01-14 09:12:32+00:00"}, "19": {"title": "Dynamic Curves for Decentralized Autonomous Cryptocurrency Exchanges", "summary": "One of the exciting recent developments in decentralized finance (DeFi) has\nbeen the development of decentralized cryptocurrency exchanges that can\nautonomously handle conversion between different cryptocurrencies.\nDecentralized exchange protocols such as Uniswap, Curve and other types of\nAutomated Market Makers (AMMs) maintain a liquidity pool (LP) of two or more\nassets constrained to maintain at all times a mathematical relation to each\nother, defined by a given function or curve. Examples of such functions are the\nconstant-sum and constant-product AMMs. Existing systems however suffer from\nseveral challenges. They require external arbitrageurs to restore the price of\ntokens in the pool to match the market price. Such activities can potentially\ndrain resources from the liquidity pool. In particular, dramatic market price\nchanges can result in low liquidity with respect to one or more of the assets\nand reduce the total value of the LP. We propose in this work a new approach to\nconstructing the AMM by proposing the idea of dynamic curves. It utilizes input\nfrom a market price oracle to modify the mathematical relationship between the\nassets so that the pool price continuously and automatically adjusts to be\nidentical to the market price. This approach eliminates arbitrage opportunities\nand, as we show through simulations, maintains liquidity in the LP for all\nassets and the total value of the LP over a wide range of market prices.", "pdf url": "http://arxiv.org/pdf/2101.02778v1", "date": "2021-01-07 21:58:20+00:00"}, "20": {"title": "Decentralized Finance, Centralized Ownership? An Iterative Mapping Process to Measure Protocol Token Distribution", "summary": "In this paper, we analyze various Decentralized Finance (DeFi) protocols in\nterms of their token distributions. We propose an iterative mapping process\nthat allows us to split aggregate token holdings from custodial and escrow\ncontracts and assign them to their economic beneficiaries. This method accounts\nfor liquidity-, lending-, and staking-pools, as well as token wrappers, and can\nbe used to break down token holdings, even for high nesting levels. We compute\nindividual address balances for several snapshots and analyze intertemporal\ndistribution changes. In addition, we study reallocation and protocol usage\ndata, and propose a proxy for measuring token dependencies and ecosystem\nintegration. The paper offers new insights on DeFi interoperability as well as\ntoken ownership distribution and may serve as a foundation for further\nresearch.", "pdf url": "http://arxiv.org/pdf/2012.09306v1", "date": "2020-12-16 22:52:10+00:00"}, "21": {"title": "Towards A First Step to Understand Flash Loan and Its Applications in DeFi Ecosystem", "summary": "Flash Loan, as an emerging service in the decentralized finance ecosystem,\nallows users to request a non-collateral loan. While providing convenience, it\nalso enables attackers to launch malicious operations with a large amount of\nasset that they do not have. Though there exist spot media reports of attacks\nthat leverage Flash Loan, there lacks a comprehensive understanding of existing\nFlash Loan services. In this work, we take the first step to study the Flash\nLoan service provided by three popular platforms. Specifically, we first\nillustrate the interactions between Flash Loan providers and users. Then, we\ndesign three patterns to identify Flash Loan transactions. Based on the\npatterns, 76, 303 transactions are determined. The evaluation results show that\nthe Flash Loan services get more popular over time. At last, we present four\nFlash Loan applications with real-world examples and propose two potential\nresearch directions.", "pdf url": "http://arxiv.org/pdf/2010.12252v3", "date": "2020-10-23 09:31:15+00:00"}, "22": {"title": "AMR:Autonomous Coin Mixer with Privacy Preserving Reward Distribution", "summary": "It is well known that users on open blockchains are tracked by an industry\nproviding services to governments, law enforcement, secret services, and alike.\nWhile most blockchains do not protect their users' privacy and allow external\nobservers to link transactions and addresses, a growing research interest\nattempts to design add-on privacy solutions to help users regain their privacy\non non-private blockchains.\n  In this work, we propose to our knowledge the first censorship resilient\nmixer, which can reward its users in a privacy-preserving manner for\nparticipating in the system. Increasing the anonymity set size, and diversity\nof users, is, as we believe, an important endeavor to raise a mixer's\ncontributed privacy in practice. The paid-out rewards can take the form of\ngovernance tokens to decentralize the voting on system parameters, similar to\nhow popular \"DeFi farming\" protocols operate. Moreover, by leveraging existing\n\"Defi\" lending platforms, AMR is the first mixer design that allows\nparticipating clients to earn financial interests on their deposited funds.\n  Our system AMR is autonomous as it does not rely on any external server or\nthird party. The evaluation of our AMR implementation shows that the system\nsupports today on Ethereum anonymity set sizes beyond thousands of users, and a\ncapacity of over $66,000$ deposits per day, at constant system costs. We\nprovide a formal specification of our zksnark-based AMR system, a privacy and\nsecurity analysis, implementation, and evaluation with both the MiMC and\nPoseidon hash functions.", "pdf url": "http://arxiv.org/pdf/2010.01056v3", "date": "2020-10-02 15:36:46+00:00"}, "23": {"title": "Automated Market Makers for Decentralized Finance (DeFi)", "summary": "This paper compares mathematical models for automated market makers including\nlogarithmic market scoring rule (LMSR), liquidity sensitive LMSR (LS-LMSR),\nconstant product/mean/sum, and others. It is shown that though LMSR may not be\na good model for Decentralized Finance (DeFi) applications, LS-LMSR has several\nadvantages over constant product/mean based automated market makers. However,\nLS-LMSR requires complicated computation (i.e., logarithm and exponentiation)\nand the cost function curve is concave. In certain DeFi applications, it is\npreferred to have computationally efficient cost functions with convex curves\nto conform with the principle of supply and demand. This paper proposes and\nanalyzes constant circle/ellipse based cost functions for automated market\nmakers. The proposed cost functions are computationally efficient (only\nrequires multiplication and square root calculation) and have several\nadvantages over widely deployed constant product cost functions. For example,\nthe proposed market makers are more robust against front-runner (slippage)\nattacks.", "pdf url": "http://arxiv.org/pdf/2009.01676v2", "date": "2020-09-03 13:58:13+00:00"}, "24": {"title": "Decentralized Asset Custody Scheme with Security against Rational Adversary", "summary": "Asset custody is a core financial service in which the custodian holds\nin-safekeeping assets on behalf of the client. Although traditional custody\nservice is typically endorsed by centralized authorities, decentralized custody\nscheme has become technically feasible since the emergence of digital assets,\nand furthermore, it is greatly needed by new applications such as blockchain\nand DeFi (Decentralized Finance).\n  In this work, we propose a framework of decentralized asset custody scheme\nthat is able to support a large number of custodians and safely hold customer\nassets of multiple times the value of the total security deposit. The proposed\ncustody scheme distributes custodians and assets into many custodian groups via\ncombinatorial designs, where each group fully controls the assigned assets.\nSince every custodian group is small, the overhead cost is significantly\nreduced. The liveness is also improved because even a single alive group would\nbe able to process transactions.\n  The security of this custody scheme is guaranteed under the rational\nadversary model, such that any adversary corrupting a bounded fraction of\ncustodians cannot move assets more than the security deposit paid. We further\nanalyze the security and performance of our constructions from both theoretical\nand experimental sides and give explicit examples with concrete numbers and\nfigures for a better understanding of our results.", "pdf url": "http://arxiv.org/pdf/2008.10895v3", "date": "2020-08-25 09:08:54+00:00"}, "25": {"title": "DeFi Protocols for Loanable Funds: Interest Rates, Liquidity and Market Efficiency", "summary": "We coin the term *Protocols for Loanable Funds (PLFs)* to refer to protocols\nwhich establish distributed ledger-based markets for loanable funds. PLFs are\nemerging as one of the main applications within Decentralized Finance (DeFi),\nand use smart contract code to facilitate the intermediation of loanable funds.\nIn doing so, these protocols allow agents to borrow and save programmatically.\nWithin these protocols, interest rate mechanisms seek to equilibrate the supply\nand demand for funds. In this paper, we review the methodologies used to set\ninterest rates on three prominent DeFi PLFs, namely Compound, Aave and dYdX. We\nprovide an empirical examination of how these interest rate rules have behaved\nsince their inception in response to differing degrees of liquidity. We then\ninvestigate the market efficiency and inter-connectedness between multiple\nprotocols, examining first whether Uncovered Interest Parity holds within a\nparticular protocol and second whether the interest rates for a particular\ntoken market show dependence across protocols, developing a Vector Error\nCorrection Model for the dynamics.", "pdf url": "http://arxiv.org/pdf/2006.13922v3", "date": "2020-06-11 17:52:43+00:00"}, "26": {"title": "A First Look into DeFi Oracles", "summary": "Recently emerging Decentralized Finance (DeFi) takes the promise of\ncryptocurrencies a step further, leveraging their decentralized networks to\ntransform traditional financial products into trustless and transparent\nprotocols that run without intermediaries. However, these protocols often\nrequire critical external information, like currency or commodity exchange\nrates, and in this respect they rely on special oracle nodes. In this paper, we\npresent the first study of DeFi oracles deployed in practice. First, we\ninvestigate designs of mainstream DeFi platforms that rely on data from\noracles. We find that these designs, surprisingly, position oracles as trusted\nparties with no or low accountability. Then, we present results of large-scale\nmeasurements of deployed oracles. We find and report that prices reported by\noracles regularly deviate from current exchange rates, oracles are not free\nfrom operational issues, and their reports include anomalies. Finally, we\ncompare the oracle designs and propose potential improvements.", "pdf url": "http://arxiv.org/pdf/2005.04377v3", "date": "2020-05-09 06:12:01+00:00"}, "27": {"title": "Attacking the DeFi Ecosystem with Flash Loans for Fun and Profit", "summary": "Credit allows a lender to loan out surplus capital to a borrower. In the\ntraditional economy, credit bears the risk that the borrower may default on its\ndebt, the lender hence requires upfront collateral from the borrower, plus\ninterest fee payments. Due to the atomicity of blockchain transactions, lenders\ncan offer flash loans, i.e., loans that are only valid within one transaction\nand must be repaid by the end of that transaction. This concept has lead to a\nnumber of interesting attack possibilities, some of which were exploited in\nFebruary 2020.\n  This paper is the first to explore the implication of transaction atomicity\nand flash loans for the nascent decentralized finance (DeFi) ecosystem. We show\nquantitatively how transaction atomicity increases the arbitrage revenue. We\nmoreover analyze two existing attacks with ROIs beyond 500k%. We formulate\nfinding the attack parameters as an optimization problem over the state of the\nunderlying Ethereum blockchain and the state of the DeFi ecosystem. We show how\nmalicious adversaries can efficiently maximize an attack profit and hence\ndamage the DeFi ecosystem further. Specifically, we present how two previously\nexecuted attacks can be \"boosted\" to result in a profit of 829.5k USD and 1.1M\nUSD, respectively, which is a boost of 2.37x and 1.73x, respectively.", "pdf url": "http://arxiv.org/pdf/2003.03810v4", "date": "2020-03-08 16:52:34+00:00"}, "28": {"title": "The Decentralized Financial Crisis", "summary": "The Global Financial Crisis of 2008, caused by the accumulation of excessive\nfinancial risk, inspired Satoshi Nakamoto to create Bitcoin. Now, more than ten\nyears later, Decentralized Finance (DeFi), a peer-to-peer financial paradigm\nwhich leverages blockchain-based smart contracts to ensure its integrity and\nsecurity, contains over 702m USD of capital as of April 15th, 2020. As this\necosystem develops, it is at risk of the very sort of financial meltdown it is\nsupposed to be preventing. In this paper we explore how design weaknesses and\nprice fluctuations in DeFi protocols could lead to a DeFi crisis. We focus on\nDeFi lending protocols as they currently constitute most of the DeFi ecosystem\nwith a 76% market share by capital as of April 15th, 2020.\n  First, we demonstrate the feasibility of attacking Maker's governance design\nto take full control of the protocol, the largest DeFi protocol by market\nshare, which would have allowed the theft of 0.5bn USD of collateral and the\nminting of an unlimited supply of DAI tokens. In doing so, we present a novel\nstrategy utilizing so-called flash loans that would have in principle allowed\nthe execution of the governance attack in just two transactions and without the\nneed to lock any assets. Approximately two weeks after we disclosed the attack\ndetails, Maker modified the governance parameters mitigating the attack\nvectors. Second, we turn to a central component of financial risk in DeFi\nlending protocols. Inspired by stress-testing as performed by central banks, we\ndevelop a stress-testing framework for a stylized DeFi lending protocol,\nfocusing our attention on the impact of a drying-up of liquidity on protocol\nsolvency. Based on our parameters, we find that with sufficiently illiquidity a\nlending protocol with a total debt of 400m USD could become undercollateralized\nwithin 19 days.", "pdf url": "http://arxiv.org/pdf/2002.08099v2", "date": "2020-02-19 10:33:02+00:00"}, "29": {"title": "Noncommutative polynomial maps", "summary": "Polynomial maps attached to polynomials of an Ore extension are naturally\ndefi ned. In this setting we show the importance of pseudo-linear\ntransformations and give some applications. In particular, factorizations of\npolynomials in an Ore extension over a fi nite fi eld F_q[t;S ], where S is the\nFrobenius automorphism, are translated into factorizations in the usual\npolynomial ring F_q[x].", "pdf url": "http://arxiv.org/pdf/1208.0112v1", "date": "2012-08-01 06:22:14+00:00"}, "30": {"title": "Decentralized Basic Income: Creating Wealth with On-Chain Staking and Fixed-Rate Protocols", "summary": "In this review, we evaluate the mechanisms behind the decentralized finance\nprotocols for generating stable, passive income. Currently, such savings\ninterest rates can be as high as 20% annually, payable in traditional currency\nvalues such as US dollars. Therefore, one can benefit from the growth of the\ncryptocurrency markets, with minimal exposure to their volatility risks. We aim\nto explain the rationale behind these savings products in simple terms. The key\nto this puzzle is that asset deposits in cryptocurrency ecosystems are of\nintrinsic economic value, as they facilitate network consensus mechanisms and\nautomated marketplaces (e.g. for lending). These functions create wealth for\nthe participants, and they provide unique advantages unavailable in traditional\nfinancial systems. Our review speaks to the notion of decentralized basic\nincome - analogous to universal basic income but guaranteed by financial\nproducts on blockchains instead of public policies. We will go through their\nimplementations of how savings can be channeled into the staking deposits in\nProof-of-Stake (PoS) protocols, through fixed-rate lending protocols and\nstaking derivative tokens, thereby exposing savers with minimal risks. We will\ndiscuss potential pitfalls, assess how these protocols may behave in market\ncycles, as well as suggest areas for further research and development.", "pdf url": "http://arxiv.org/pdf/2107.14312v1", "date": "2021-07-29 20:21:55+00:00"}, "31": {"title": "Architecture of Automated Crypto-Finance Agent", "summary": "We present the cognitive architecture of an autonomous agent for active\nportfolio management in decentralized finance, involving activities such as\nasset selection, portfolio balancing, liquidity provision, and trading. Partial\nimplementation of the architecture is provided and supplied with preliminary\nresults and conclusions.", "pdf url": "http://arxiv.org/pdf/2107.07769v3", "date": "2021-07-16 08:57:50+00:00"}, "32": {"title": "Frontrunner Jones and the Raiders of the Dark Forest: An Empirical Study of Frontrunning on the Ethereum Blockchain", "summary": "Ethereum prospered the inception of a plethora of smart contract\napplications, ranging from gambling games to decentralized finance. However,\nEthereum is also considered a highly adversarial environment, where vulnerable\nsmart contracts will eventually be exploited. Recently, Ethereum's pool of\npending transaction has become a far more aggressive environment. In the hope\nof making some profit, attackers continuously monitor the transaction pool and\ntry to frontrun their victims' transactions by either displacing or suppressing\nthem, or strategically inserting their transactions. This paper aims to shed\nsome light into what is known as a dark forest and uncover these predators'\nactions. We present a methodology to efficiently measure the three types of\nfrontrunning: displacement, insertion, and suppression. We perform a\nlarge-scale analysis on more than 11M blocks and identify almost 200K attacks\nwith an accumulated profit of 18.41M USD for the attackers, providing evidence\nthat frontrunning is both, lucrative and a prevalent issue.", "pdf url": "http://arxiv.org/pdf/2102.03347v2", "date": "2021-02-05 18:49:50+00:00"}, "33": {"title": "SoK: Lending Pools in Decentralized Finance", "summary": "Lending pools are decentralized applications which allow mutually untrusted\nusers to lend and borrow crypto-assets. These applications feature complex,\nhighly parametric incentive mechanisms to equilibrate the loan market. This\ncomplexity makes the behaviour of lending pools difficult to understand and to\npredict: indeed, ineffective incentives and attacks could potentially lead to\nemergent unwanted behaviours. Reasoning about lending pools is made even harder\nby the lack of executable models of their behaviour: to precisely understand\nhow users interact with lending pools, eventually one has to inspect their\nimplementations, where the incentive mechanisms are intertwined with low-level\nimplementation details. Further, the variety of existing implementations makes\nit difficult to distill the common aspects of lending pools. We systematize the\nexisting knowledge about lending pools, leveraging a new formal model of\ninteractions with users, which reflects the archetypal features of mainstream\nimplementations. This enables us to prove some general properties of lending\npools, such as the correct handling of funds, and to precisely describe\nvulnerabilities and attacks. We also discuss the role of lending pools in the\nbroader context of decentralized finance.", "pdf url": "http://arxiv.org/pdf/2012.13230v1", "date": "2020-12-24 12:53:38+00:00"}, "34": {"title": "Optimal Bidding Strategy for Maker Auctions", "summary": "The Maker Protocol is a decentralized finance application that enables\ncollateralized lending. The application uses open-bid, second-price auctions to\ncomplete its loan liquidation process. In this paper, we develop a bidding\nfunction for these auctions, focusing on the costs incurred to participate in\nthe auctions. We then optimize these costs using parameters from historical\nauction data, and compare our optimal bidding prices to the historical auction\nprices. We find that the majority of auctions end at higher prices than our\nrecommended optimal prices, and we propose several theories for these results.", "pdf url": "http://arxiv.org/pdf/2009.07086v2", "date": "2020-09-15 13:30:19+00:00"}, "35": {"title": "Stablecoins 2.0: Economic Foundations and Risk-based Models", "summary": "Stablecoins are one of the most widely capitalized type of cryptocurrency.\nHowever, their risks vary significantly according to their design and are often\npoorly understood. We seek to provide a sound foundation for stablecoin theory,\nwith a risk-based functional characterization of the economic structure of\nstablecoins. First, we match existing economic models to the disparate set of\ncustodial systems. Next, we characterize the unique risks that emerge in\nnon-custodial stablecoins and develop a model framework that unifies existing\nmodels from economics and computer science. We further discuss how this\nmodeling framework is applicable to a wide array of cryptoeconomic systems,\nincluding cross-chain protocols, collateralized lending, and decentralized\nexchanges. These unique risks yield unanswered research questions that will\nform the crux of research in decentralized finance going forward.", "pdf url": "http://arxiv.org/pdf/2006.12388v3", "date": "2020-06-22 16:17:58+00:00"}, "36": {"title": "Improved Price Oracles: Constant Function Market Makers", "summary": "Automated market makers, first popularized by Hanson's logarithmic market\nscoring rule (or LMSR) for prediction markets, have become important building\nblocks, called 'primitives,' for decentralized finance. A particularly useful\nprimitive is the ability to measure the price of an asset, a problem often\nknown as the pricing oracle problem. In this paper, we focus on the analysis of\na very large class of automated market makers, called constant function market\nmakers (or CFMMs) which includes existing popular market makers such as\nUniswap, Balancer, and Curve, whose yearly transaction volume totals to\nbillions of dollars. We give sufficient conditions such that, under fairly\ngeneral assumptions, agents who interact with these constant function market\nmakers are incentivized to correctly report the price of an asset and that they\ncan do so in a computationally efficient way. We also derive several other\nuseful properties that were previously not known. These include lower bounds on\nthe total value of assets held by CFMMs and lower bounds guaranteeing that no\nagent can, by any set of trades, drain the reserves of assets held by a given\nCFMM.", "pdf url": "http://arxiv.org/pdf/2003.10001v4", "date": "2020-03-22 21:37:04+00:00"}}